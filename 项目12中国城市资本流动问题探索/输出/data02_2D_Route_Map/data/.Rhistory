library(rjson)
library(dplyr)
setwd('/Volumes/Zzz/00/class_Echarts/20171210/local/2D_Route_Map/data')
ori <- readLines('data.json') %>% fromJSON()
ori <- readLines('data.json')
ori <- readLines('data.json') %>% gsub('var data = ','',.) %>% fromJSON()
library(rlist)
runif(1,0,10)
runif(1,0,10)
runif(1,0,10)
runif(1,0,10)
runif(1,0,10)
runif(1,0,10)
runif(1,0,10)
runif(1,0,10)
round( runif(1,0,10))
round( runif(1,0,10))
round( runif(1,0,10))
list.update(ori, value = round(runif(1,0,10)))
ori <- list.update(ori, value = round(runif(1,0,10)))
ori[[1]]
ori[[2]]
toJSON(ori) %>% paste0('var data = ',.) %>% writeLines('data.js')
c(ori[[1,2]])
c(ori[[c(1,2)]])
ori[[c(1,2)]]
ori[[1]]
c(ori[[1]],ori[[2]])
ori <- c(ori[[1]],ori[[2]],ori[[3]],ori[[4]],ori[[5]],ori[[6]],ori[[7]],ori[[8]],ori[[9]],ori[[10]])
setwd('/Volumes/Zzz/00/class_Echarts/20171210/local/2D_Route_Map/data')
ori <- readLines('data.json') %>% gsub('var data = ','',.) %>% fromJSON()
ori <- list.update(ori, value = round(runif(1,0,10)))
ori <- list(ori[[1]],ori[[2]],ori[[3]],ori[[4]],ori[[5]],ori[[6]],ori[[7]],ori[[8]],ori[[9]],ori[[10]])
toJSON(ori) %>% paste0('var data = ',.) %>% writeLines('data.js')
setwd('/Volumes/Zzz/00/class_Echarts/20171210/local/2D_Route_Map/data')
ori <- readLines('data.json') %>% gsub('var data = ','',.) %>% fromJSON()
ori <- readLines('data.js') %>% gsub('var data = ','',.) %>% fromJSON()
x$city
coords
list.map(ori,function(coords){
coords
})
list.map(ori,function(x){
return(x)
})
View(list.apply)
test <-
lapply(ori,function(x){
list(
type='Feature',
properties=list(
value=x$value
),
geometry:list(
type='LineString',
coordinates:x$coords
)
)
})
test <-
lapply(ori,function(x){
list(
type='Feature',
properties=list(
value=x$value
),
geometry=list(
type='LineString',
coordinates:x$coords
)
)
})
test <-
lapply(ori,function(x){
list(
type='Feature',
properties=list(
value=x$value
),
geometry=list(
type='LineString',
coordinates=x$coords
)
)
})
test <-
lapply(ori,function(x){
list(
type='Feature',
properties=list(
value=x$value
),
geometry=list(
type='LineString',
coordinates=x$coords
)
)
}) %>%
list(
type='FeatureCollection',
features=.
)
toJSON(test) %>% writeLines(.,'test.json')
toJSON(test) %>% paste0('var data = ',.) %>% writeLines(.,'test.js')
